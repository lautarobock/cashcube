<!DOCTYPE html>
<html ng-app="cashcube">
<head>
    <title>CubeCash - Resume</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="./js/common.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>
    <script src="./js/angular-resource.js"></script>
    <script src="./js/ui-bootstrap-tpls-0.4.0.min.js"></script>

    <script src="./js/cube.js"></script>
</head>
<body ng-controller="ProjectionController">
		
    <div id="example" class="container-fluid">
		<div class="row-fluid">
			<div class="span12" style="margin-top: 10px">
				<button class="btn btn-mini" ng-click="navigateTo('movement.html')">Movimientos</button>
				<button class="btn btn-mini" ng-click="navigateTo('account.html')">Cuentas</button>
				<button class="btn btn-mini" ng-click="navigateTo('currency.html')">Moneda</button>
				<button class="btn btn-mini" ng-click="navigateTo('category.html')">Categorias</button>
				<button class="btn btn-mini" ng-click="navigateTo('resume.html')">Resume</button>
				<button class="btn btn-mini" ng-click="navigateTo('graph.html')">Graficos</button>
				<button class="btn btn-mini btn-primary" ng-click="navigateTo('projection.html')">Cubo</button>

                <div style="margin-top: 20px">
                    <h2>{{selected.value}}</h2>
                    <select ng-model="selected" ng-options="month.value for month in months" ng-change="toMonth(selected)"></select>
                </div>

		        <table class="table table-bordered table-hover ">
					<thead>
						<tr>
				            <th>
				               Dia
				            </th>
				            <th ng-repeat="account in accounts  | base">
				                {{account.name}}
				            </th>
				        </tr>
					</thead>
                    <tbody ng-repeat="w in weeks()">
                        <tr ng-repeat="day in days(w.from,w.to)">
                            <td>
                                <strong>{{day}}</strong>
                            </td>
                            <td ng-repeat="account in accounts | base" ng-class="getClass(movements.days[day][account._id].value)" >
                                <span popover-placement="top" Popover-animation="true"  popover="{{getPopover(movements.days[day][account._id].items)}}">
                                    {{movements.days[day][account._id].value.toFixed(2)|valueFilter}}
                                </span>
                            </td>
                        </tr>
                        <tr class="info">
                            <td>
                                <strong>W: {{$index+1}}</strong>
                            </td>
                            <td ng-repeat="account in accounts | base">
                                <strong>
                                    {{movements.weeks[(w.from-1)/7+1][account._id].value.toFixed(2)|valueFilter}}
                                </strong>
                            </td>
                        </tr>
                    </tbody>
                    <tbody>
                        <tr>
                            <td>
                                <strong>Total</strong>
                            </td>
                            <td ng-repeat="account in accounts | base">
                                <strong>
                                    {{movements.month[account._id].value.toFixed(2)|valueFilter}}
                                </strong>
                            </td>
                        </tr>
                    </tbody>
		        </table>
		    </div>
		</div>
    </div>

</body>
</html>
