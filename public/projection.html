
<!DOCTYPE html>
<html ng-app="cashcube">
<head>
    <title>CubeCash - Resume</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="./js/common.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.5/angular.min.js"></script>
    <script src="./js/angular-resource.js"></script>
    <script src="./js/ui-bootstrap-tpls-0.4.0.min.js"></script>

    <script>
        var cashcube = angular.module('cashcube',['ngResource']);
        cashcube.controller("ProjectionController", function($scope,Movement,Account) {

            $scope.movements = Movement.query();

            $scope.accounts = Account.query();

            $scope.weekMovements = [
                {
                    days:[1,2,3,4,5,6,7],
                    values: {
                        cash: 1,
                        debito_rio: 2
                    }
                },
                {
                    days:[8,9,10,11,12,13,14],
                    values: {
                        cash: 1,
                        debito_rio: 2
                    }
                },
                {
                    days: [15,16,17,18,19,20,21],
                    values: {
                        cash: 1,
                        debito_rio: 2
                    }
                },
                {
                    days: [22,23,24,25,26,27,28],
                    values: {
                        cash: 1,
                        debito_rio: 2
                    }
                },
                {
                    days: [29,30,31],
                    values: {
                        cash: 1,
                        debito_rio: 2
                    }
                }

            ];

            $scope.navigateTo = function(href) {
                window.location.href = href;
            };

            $scope.isSub = function(day) {
                return Boolean($scope.weekMovements[day]);
            };
        });
	
	cashcube.factory('Movement',function($resource) {
        var today = new Date();
        var year = today.getYear()+1900;
        var month = today.getMonth()+1;
		return $resource('cube?year='+year+'&month=' + month,{}, {
			query: { method: 'GET', params: {  },isArray:false  }
		});
	});
    cashcube.factory('Account',function($resource) {
        return $resource('account',{},{
            query: { method: 'GET', params: {}, isArray:true  }
        });
    });
    </script>
</head>
<body ng-controller="ProjectionController">
    <button class="btn" ng-click="navigateTo('movement.html')">Movimientos</button>
    <button class="btn" ng-click="navigateTo('account.html')">Cuentas</button>
    <button class="btn" ng-click="navigateTo('currency.html')">Moneda</button>
    <button class="btn" ng-click="navigateTo('category.html')">Categorias</button>
    <button class="btn" ng-click="navigateTo('resume.html')">Resume</button>
    <button class="btn" ng-click="navigateTo('graph.html')">Graficos</button>
    <button class="btn btn-info" ng-click="navigateTo('projection.html')">Cubo</button>
    <week ng-repeat="week in weekMovements">
        {{week.days}}<br/>
        </week>
    <div id="example" class="k-content" >
        <div>
            <table border=1>
                <tr>
                    <th>
                       Dia
                    </th>
                    <th ng-repeat="account in accounts">
                        {{account.name}}
                    </th>
                </tr>
                <week ng-repeat="week in weekMovements">
                    <tr ng-repeat="d in week.days">
                        {{d}}
                        <!--<td>-->
                            <!--<strong>{{day}}</strong>-->
                        <!--</td>-->
                        <!--<td ng-repeat="account in accounts">-->
                            <!--{{movements[day][account._id].toFixed(2)}}-->
                        <!--</td>-->
                    </tr>
                    <!--<tr>-->
                        <!--<td>-->
                            <!--<strong>Subtotal</strong>-->
                        <!--</td>-->
                        <!--<td ng-repeat="account in accounts">-->
                            <!--{{weekMovements[week.days[0]].values[account._id].toFixed(2)}}-->
                        <!--</td>-->
                    <!--</tr>-->
                </week>
            </table>
        </div>
    </div>

</body>
</html>
